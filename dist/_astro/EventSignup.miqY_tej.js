import{d as u,A as b}from"./hooks.module.CsoCk8bO.js";import{z as m}from"./index.ByYdXFAB.js";import{T as E}from"./TriffectaButton.CloZHWMP.js";import{u as e}from"./jsxRuntime.module.WrhyN42J.js";import"./preact.module.Dz6_IuHR.js";const w=m.object({firstName:m.string().min(1,"First name is required"),lastName:m.string().min(1,"Last name is required"),businessEmail:m.string().email("A valid business email is required"),notificationOptIn:m.boolean()});function O(){const[a,g]=u({firstName:"",lastName:"",businessEmail:"",notificationOptIn:!1}),[s,f]=u({}),[N,x]=u(""),[d,y]=u(!1),n={firstName:b(null),lastName:b(null),businessEmail:b(null)},p=l=>{const r=l.target,{name:t,value:i,type:o}=r;g(c=>({...c,[t]:o==="checkbox"?r.checked:i})),f(c=>({...c,[t]:""}))},v=async l=>{l.preventDefault(),f({}),x("");const r=w.safeParse(a);if(!r.success){const t={};r.error.errors.forEach(o=>{if(o.path.length){const c=o.path[0];t[c]=o.message}}),f(t);const i=r.error.errors[0]?.path[0];n[i]?.current?.focus(),n[i]?.current?.scrollIntoView({behavior:"smooth",block:"center"});return}y(!0);try{const t=await fetch("https://marketing.triffecta.com/event-signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,notificationOptIn:a.notificationOptIn?1:0})}),i=await t.json();if(!t.ok)throw new Error(i.message||"Form submission failed");x("Thanks! We'll be in touch shortly."),g({firstName:"",lastName:"",businessEmail:"",notificationOptIn:!1})}catch{f({general:"There was a problem. Please try again later."})}finally{y(!1)}},h=l=>`w-full rounded-xl border-1 py-2 pl-4 ${s[l]?"border-error":"border-[#CCCCCC]"} focus:border-primary focus:outline-none`;return e("div",{class:"w-full rounded-2xl bg-white p-10",children:N?e("div",{class:"text-success bg-success-light mb-4 rounded-lg p-4 font-bold",children:N}):e("form",{onSubmit:v,class:"flex flex-col space-y-8",children:e("fieldset",{class:`flex flex-col space-y-6 ${d?"pointer-events-none opacity-50":""}`,disabled:d,children:[e("div",{class:"flex flex-col gap-4 md:flex-row",children:[e("div",{class:"w-full",children:[e("input",{ref:n.firstName,name:"firstName",placeholder:"First Name",value:a.firstName,onInput:p,class:h("firstName")}),s.firstName&&e("p",{class:"text-error mt-1.5 ml-4.5 text-sm font-bold",children:s.firstName})]}),e("div",{class:"w-full",children:[e("input",{ref:n.lastName,name:"lastName",placeholder:"Last Name",value:a.lastName,onInput:p,class:h("lastName")}),s.lastName&&e("p",{class:"text-error mt-1.5 ml-4.5 text-sm font-bold",children:s.lastName})]})]}),e("div",{children:[e("input",{ref:n.businessEmail,name:"businessEmail",placeholder:"Business Email",value:a.businessEmail,onInput:p,class:h("businessEmail")}),s.businessEmail&&e("p",{class:"text-error mt-1.5 ml-4.5 text-sm font-bold",children:s.businessEmail})]}),e("p",{class:"text-sm",children:"Triffecta is committed to protecting and respecting your privacy, by clicking submit below, you consent to allow Triffecta to store and process the personal information submitted above to provide you the content requested."}),e("div",{className:"flex justify-end",children:e(E,{type:"submit",disabled:d,className:"px-10 py-2",children:d?"Submitting...":"Schedule a Meeting"})}),s.general&&e("p",{class:"text-error text-sm font-bold",children:s.general})]})})})}export{O as default};
